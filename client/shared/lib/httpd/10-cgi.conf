# /usr/share/doc/lighttpd-doc/cgi.txt

server.modules += ( "mod_cgi", "mod_fastcgi" )


#$HTTP["url"] =~ "^/cgi-bin/api/" {
#alias.url += ( "/cgi-bin/api/" => "/opt/opengnsys/lib/httpd/api/" )
#$HTTP["url"] =~ "^/cgi-bin/api/" {
#cgi.assign = ( "exec.php" => "/usr/bin/php")
#}
#}


$HTTP["url"] =~ "^/cgi-bin/" {
alias.url += ( "/cgi-bin/api/" => "/opt/opengnsys/lib/httpd/api/" )
alias.url += ( "/cgi-bin/" => "/usr/lib/cgi-bin/" )
$HTTP["url"] =~ "^/cgi-bin/" {
cgi.assign = ( ".sh" => "/bin/sh",
	       "exec.php" => "/usr/bin/php"
	     )
}
}

## Warning this represents a security risk, as it allow to execute any file
## with a .pl/.py even outside of /usr/lib/cgi-bin.
#
#cgi.assign      = (
#	".pl"  => "/usr/bin/perl",
#	".py"  => "/usr/bin/python",
#)

fastcgi.server = ( ".php" => ((
                     "bin-path" => "/usr/bin/php-cgi",
                     "socket" => "/tmp/php.socket",
                     "max-procs" => 1,
                     "bin-environment" => (
                       "PHP_FCGI_CHILDREN" => "16",
                       "PHP_FCGI_MAX_REQUESTS" => "10000"
                     ),
                     "broken-scriptfilename" => "enable"
                 )))

$SERVER["socket"] == ":8000" {
        server.document-root = "/var/www/html/ogagent/"
        url.rewrite-once = ( "^/([^?]*)" => "/index.php/$1")
        ssl.engine = "enable"
        ssl.pemfile = "/etc/lighttpd/ssl/ogagent.pem"
}